import{Control as e,DomEvent as n,Layer as t,Util as a}from"leaflet";const s={collapsed:!1,treeCollapsed:!0};export class LayersTree extends e.Layers{constructor(e=[],n=[],t={}){super(),a.setOptions(this,s),this.initialize(e,n,t)}_toggleExpand(e){const n=event.target;if(!n)return!1;let t=n;"groupLabel"==n.parentElement.className&&(t=n.parentElement),e.stopPropagation();const a=t.parentElement;let s=a.querySelector(".LayersTreeExpandable"),r=a.querySelector(".iconSpan");s&&(s.classList.toggle("expanded"),s.classList.toggle("collapsed")),r&&(r.classList.toggle("expanded"),r.classList.toggle("collapsed"))}_createGroupContainer(e,t){const a=document.createElement("div");a.className="LayersTree";const s=document.createElement("span");s.dataset.groupname=t,s.className="groupLabel",n.on(s,"click",this._toggleExpand,this);const r=document.createElement("button");r.className="iconSpan",s.appendChild(r);const o=document.createElement("span");o.className="textspan",o.textContent=t,s.appendChild(o),a.appendChild(s);let l=this._overlaysList;e.overlay||(l=this._baseLayersList),l.appendChild(a);const i=document.createElement("div");return i.className="LayersTreeExpandable",0==this.options.treeCollapsed?(i.classList.add("expanded"),r.classList.add("expanded")):(i.classList.add("collapsed"),r.classList.add("collapsed")),a.appendChild(i),this.groups[t]=i,a}_addItem(e){const t=document.createElement("label"),s=this._map.hasLayer(e.layer),r=document.createElement("input");r.type=e.overlay?"checkbox":"radio",r.className="leaflet-control-layers-selector",r.defaultChecked=s,e.overlay||(r.name=`leaflet-base-layers_${a.stamp(this)}`),this._layerControlInputs.push(r),r.layerId=a.stamp(e.layer),n.on(r,"click",this._onInputClick,this);const o=document.createElement("span"),l=e.layer._LTgroup||void 0;o.innerHTML=`${e.name}`;const i=document.createElement("span");t.appendChild(i),l&&(t.className="groupLabel"),i.appendChild(r),i.appendChild(o),this.groups||(this.groups={});let d,p=this.groups[l]||null;return l&&!p&&(p=this._createGroupContainer(e,l)),d=e.overlay?this._overlaysList:this._baseLayersList,p&&(d=this.groups[l],t.classList.add("LayersTreeIndent")),d.appendChild(t),this._checkDisabledLayers(),t}_update(){this.groups=[],super._update()}onAdd(e){super.onAdd(e);this._container;return this._container}}export{LayersTree as default};!function(){try{const e=new CSSStyleSheet;e.replaceSync('\n/*\n LayersTree.css\n   Injected to adoptedStyleSheets at LayersTree.mjs module load\n*/\n.LayersTree {\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    min-width: 0;\n    word-wrap: break-word;\n    background-color: transparent;\n    background-clip: border-box;\n    border: 1px solid rgba(1,1,1,.125);\n    border-radius: .25rem;\n    padding: 0;\n    overflow: hidden;\n    min-height: 0;\n}\n.LayersTree .groupLabel {\n    position: relative;\n}\n.LayersTree .textspan {\n    position: relative;\n    left: 10px;\n}\n.LayersTree .iconSpan {\n    width: 16px;\n    height: 16px;\n    display: inline-block;\n    background-repeat: no-repeat;\n    border: none;\n    background-color: transparent;\n    margin: auto;\n    position: relative;\n}\n.LayersTree .iconSpan.collapsed {\n    background-image: url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path stroke="black" d="M13.5 5.3 7.2.6A3.3 3.3 90 002 3.3V12.5A3.3 3.3 90 007.2 15.2L13.5 10.6A3.3 3.3 90 0013.5 5.3Z" fill="white"/></svg>\');\n    transform: rotate(0deg);\n    transition: transform 0.3s;\n}\n.LayersTree .iconSpan.expanded {\n    background-image: url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path stroke="black" d="M13.5 5.3 7.2.6A3.3 3.3 90 002 3.3V12.5A3.3 3.3 90 007.2 15.2L13.5 10.6A3.3 3.3 90 0013.5 5.3Z" fill="white"/></svg>\');\n    transform: rotate(90deg);\n    transition: transform 0.3s;\n}\n.LayersTreeIndent {\n    left: 10px;\n}\n.LayersTreeExpandable {\n  overflow: hidden;\n}\n.LayersTreeExpandable.collapsed {\n  display: none;\n  /* don\'t know if this will work */\n  transition: display 0.6s;\n}\n.LayersTreeExpandable.expanded {\n  display: inline-block;\n  /* don\'t know if this will work */\n  transition: display 0.6s;\n}\n/* this is for the glabel */\n.groupLabel {\n  cursor: pointer;\n  width: 100%;\n  border: none;\n  text-align: left;\n  outline: none;\n  font-size: 1em;\n}\n.groupLabel:hover {\n  background-color: #ccc;\n}\n'),document.adoptedStyleSheets.push(e)}catch(e){console.warn("You should replace your broken browser",e.message)}}();